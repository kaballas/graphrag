-Goal-
Given SAP “What’s New” release notes and a list of entity types, extract entities and relationships.

-Steps-
Entity extraction
• Emit entities only if their type ∈ [{entity_types}] after normalization to UPPERCASE.
• When TECHNOLOGY is NOT in [{entity_types}], do NOT emit products/services/environments as entities; represent such changes as EVENT entities.
• PERSON must be a named individual. Do NOT output roles or groups.
• GEO must be a real-world geography.
• Construct EVENT entities whenever a record describes a release, upgrade, deprecation, migration, fix, enablement, or new capability.
  – Name pattern: <SHORT TITLE> — <ISO DATE if present> (prefer “Valid as Of”; else “Latest Revision”).
• For each entity output:
  – entity_name: UPPERCASED
  – entity_type: One of [{entity_types}] (UPPERCASED)
  – entity_description: ≤25 words, factual, tied to the source text
• Format:
("entity"{tuple_delimiter}<entity_name>{tuple_delimiter}<entity_type>{tuple_delimiter}<entity_description>)

Relationship extraction
• Use only entities emitted in step 1.
• Emit a relationship only if the text states a clear dependency/impact between two emitted entities.
• relationship_description ≤20 words; relationship_strength ∈ {{1..10}}.
• Format:
("relationship"{tuple_delimiter}<source_entity>{tuple_delimiter}<target_entity>{tuple_delimiter}<relationship_description>{tuple_delimiter}<relationship_strength>)

-Output rules-
• Return all entities and then relationships in a single flat list.
• Separate items with {record_delimiter}.
• End with {completion_delimiter}.
• If no relationships qualify, emit none.
• If at least one record exists and TECHNOLOGY is not allowed, emit at least one EVENT per qualifying record.

-Validation (drop offending item)-
• No internal reasoning markers (e.g., <think>, analysis).
• entity_type not in [{entity_types}] → drop.
• GEO not a real place → drop.
• PERSON not a named individual → drop.
• Products/services/environments emitted when TECHNOLOGY not allowed → drop.
• Descriptions exceeding limits → truncate without changing meaning.
• Case: entity_name and entity_type must be UPPERCASE.

-Minimal Examples-
Example A
Entity_types: ORGANIZATION,EVENT
Text:
SAP BTP Neo will switch to DigiCert Global Root G3 for all platform domains by April 2026.
Output:
("entity"{tuple_delimiter}DIGICERT GLOBAL ROOT G3{tuple_delimiter}ORGANIZATION{tuple_delimiter}Certificate authority replacing DigiCert Global Root G2)
{record_delimiter}
("entity"{tuple_delimiter}ROOT CERTIFICATE REPLACEMENT — 2026-04-01{tuple_delimiter}EVENT{tuple_delimiter}Neo platform domains will use certificates signed by DigiCert Global Root G3)
{record_delimiter}
("relationship"{tuple_delimiter}ROOT CERTIFICATE REPLACEMENT — 2026-04-01{tuple_delimiter}DIGICERT GLOBAL ROOT G3{tuple_delimiter}Event uses certificates signed by this CA{tuple_delimiter}9)
{completion_delimiter}

Example B
Entity_types: EVENT
Text:
The credential type instance-secret has reached end-of-life. Use binding-secret or x509 instead.
Output:
("entity"{tuple_delimiter}INSTANCE-SECRET END-OF-LIFE — 2024-11-12{tuple_delimiter}EVENT{tuple_delimiter}Deprecated credential; replacements are binding-secret or x509 per guidance)
{completion_delimiter}

Example C
Entity_types: ORGANIZATION,PERSON,GEO,EVENT
Text:
Enhancements to Joule in SAP SuccessFactors. Inactive users removed from certain views. Fix for oversized images in “Create spot award”. Valid as Of: 2024-04-03.
Output:
("entity"{tuple_delimiter}ENHANCEMENTS TO JOULE IN SAP SUCCESSFACTORS — 2024-04-03{tuple_delimiter}EVENT{tuple_delimiter}Enhancements to Joule features; inactive users removed from results; default image applied for oversized uploads)
{completion_delimiter}


######################
-Real Data-
######################
Entity_types: {entity_types}
Text: {input_text}
######################
Output: